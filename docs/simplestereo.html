
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>simplestereo package &#8212; SimpleStereo 1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to SimpleStereo’s documentation!" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to SimpleStereo’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SimpleStereo 1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">simplestereo package</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="simplestereo-package">
<h1>simplestereo package<a class="headerlink" href="#simplestereo-package" title="Permalink to this headline">¶</a></h1>
<section id="module-simplestereo">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-simplestereo" title="Permalink to this headline">¶</a></h2>
<section id="simplestereo">
<h3>simplestereo<a class="headerlink" href="#simplestereo" title="Permalink to this headline">¶</a></h3>
<p>Common classes and functions.</p>
<p>Documentation DOCSTRING follows numpy-style wherever possible.
See <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">https://numpydoc.readthedocs.io/en/latest/format.html</a></p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>Add new rig class for structured light (projector + camera).</p></li>
<li><p>Add new rig class for uncalibrated stereo.</p></li>
</ul>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.RectifiedStereoRig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.</span></span><span class="sig-name descname"><span class="pre">RectifiedStereoRig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">Rcommon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rectHomography1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rectHomography2</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#RectifiedStereoRig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.RectifiedStereoRig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><code class="xref py py-class docutils literal notranslate"><span class="pre">simplestereo.StereoRig</span></code></a></p>
<p>Keep together and manage all parameters of a calibrated and rectified stereo rig.</p>
<p>It includes all the parameters of StereoRig plus two rectifying homographies. Differently from OpenCV,
here the rectifying <em>homographies</em> (pixel domain) are taken as input, the ones commonly referred in literature, and
<strong>not</strong> the rectification transformation in the object space.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>Rcommon</strong> (<em>np.array</em>) – 3x3 matrices representing the new common camera orientation
after rectification.</p></li>
<li><p><strong>rectHomography1</strong> (<em>np.array</em>) – 3x3 rectification homographies.</p></li>
<li><p><strong>rectHomography2</strong> (<em>np.array</em>) – 3x3 rectification homographies.</p></li>
<li><p><strong>StereoRig</strong> – A StereoRig object or, <em>alternatively</em>, all the parameters of
<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">simplestereo.StereoRig()</span></code></a> (in the same order).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.RectifiedStereoRig.computeRectificationMaps">
<span class="sig-name descname"><span class="pre">computeRectificationMaps</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">destDims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#RectifiedStereoRig.computeRectificationMaps"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.RectifiedStereoRig.computeRectificationMaps" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the two maps to undistort and rectify the stereo pair.</p>
<p>This method wraps <code class="docutils literal notranslate"><span class="pre">cv2.initUndistortRectifyMap()</span></code> plus a custom fitting algorithm to keep image within dimensions.
It modifies the original camera matrix applying affine transformations (x-y scale and translation, shear (x axis only))
without losing rectification. The two new maps are stored internally.
This method is called in the constructor with default parameters and can be called later to change its settings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>destDims</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Resolution of destination images as (width, height) tuple (default to first image resolution).</p></li>
<li><p><strong>zoom</strong> (<em>float</em><em>, </em><em>optional</em>) – Zoom on the final images. Default to 1.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>OpenCV uses <em>rectification transformation in the object space (3x3 matrix)</em>, but most of the papers provide algorithms
to compute the homography to be applied to the <em>image</em> in a pixel domain, not a rotation matrix R in 3D space.
This library always refers to rectification transform as the ones in pixel domain.
To adapt it to be used with OpenCV the transformation to be used in <code class="xref py py-func docutils literal notranslate"><span class="pre">cv2.initUndistortRectifyMap()</span></code> (and other functions)
is given by <cite>rectHomography.dot(cameraMatrix)</cite>.
For each camera, the function computes homography H as the rectification transformation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.RectifiedStereoRig.fromFile">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#RectifiedStereoRig.fromFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.RectifiedStereoRig.fromFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative initialization of StereoRigRectified object from JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – Path of the JSON file containing saved parameters of the stereo rig.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An object of StereoRigRectified class.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>StereoRigRectified</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.RectifiedStereoRig.get3DPoints">
<span class="sig-name descname"><span class="pre">get3DPoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">disparityMap</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#RectifiedStereoRig.get3DPoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.RectifiedStereoRig.get3DPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the 3D points in the space from the disparity map.</p>
<p>If the calibration was done with real world units (e.g. millimeters),
the output would be in the same units. The world origin will be in the
left camera.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>disparityMap</strong> (<em>numpy.ndarray</em>) – A dense disparity map having same height and width of images.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of points having shape <em>(height,width,3)</em>, where at each y,x coordinates
a <em>(x,y,z)</em> point is associated.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.RectifiedStereoRig.getRectifiedProjectionMatrices">
<span class="sig-name descname"><span class="pre">getRectifiedProjectionMatrices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#RectifiedStereoRig.getRectifiedProjectionMatrices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.RectifiedStereoRig.getRectifiedProjectionMatrices" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the projection matrices of camera 1 and camera 2 after rectification.</p>
<p>New projection matrices, after rectification, share the same orientation <cite>Rcommon</cite>,
have only one horizontal displacement (the baseline) and
have new intrinsics (<cite>K1</cite> and <cite>K2</cite>) that depends on all the rigid manipulation done after rectification.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>numpy.ndarray</em> – The 3x4 projection matrix of the first camera.</p></li>
<li><p><em>numpy.ndarray</em> – The 3x4 projection matrix of the second camera.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.RectifiedStereoRig.rectifyImages">
<span class="sig-name descname"><span class="pre">rectifyImages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation=&lt;MagicMock</span> <span class="pre">id='140033210597968'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#RectifiedStereoRig.rectifyImages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.RectifiedStereoRig.rectifyImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Undistort, rectify and apply affine transformation to a couple of images coming from the stereo rig.</p>
<p><em>img1</em> and <em>img2</em> must be provided as in calibration (es. img1 is the left image, img2 the right one).
This method is wraps <code class="docutils literal notranslate"><span class="pre">cv2.remap()</span></code> for two images of the stereo pair. The maps used are computed by
<a class="reference internal" href="#simplestereo.RectifiedStereoRig.computeRectificationMaps" title="simplestereo.RectifiedStereoRig.computeRectificationMaps"><code class="xref py py-meth docutils literal notranslate"><span class="pre">computeRectificationMaps()</span></code></a> during initialization (with default parameters).
<a class="reference internal" href="#simplestereo.RectifiedStereoRig.computeRectificationMaps" title="simplestereo.RectifiedStereoRig.computeRectificationMaps"><code class="xref py py-meth docutils literal notranslate"><span class="pre">computeRectificationMaps()</span></code></a> can be called before calling this method to change mapping settings (e.g. final resolution).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img1</strong> (<em>cv2.Mat</em>) – A couple of OpenCV images taken with the stereo rig (ordered).</p></li>
<li><p><strong>img2</strong> (<em>cv2.Mat</em>) – A couple of OpenCV images taken with the stereo rig (ordered).</p></li>
<li><p><strong>interpolation</strong> (<em>int</em><em>, </em><em>optional</em>) – OpenCV <em>InterpolationFlag</em>. The most common are <code class="docutils literal notranslate"><span class="pre">cv2.INTER_NEAREST</span></code>, <code class="docutils literal notranslate"><span class="pre">cv2.INTER_LINEAR</span></code> (default) and <code class="docutils literal notranslate"><span class="pre">cv2.INTER_CUBIC</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>img1_rect, img2_rect</strong> – The undistorted images.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>cv2.Mat</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.RectifiedStereoRig.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#RectifiedStereoRig.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.RectifiedStereoRig.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save configuration to JSON file.</p>
<p>Save the current stereo rig configuration to a JSON file that can be loaded later.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – Path where to save the JSON file containing the parameters of the stereo rig.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.StereoRig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.</span></span><span class="sig-name descname"><span class="pre">StereoRig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">res1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">res2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intrinsic1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intrinsic2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distCoeffs1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distCoeffs2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">T</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">E</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reprojectionError</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StereoRig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StereoRig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Keep together and manage all parameters of a calibrated stereo rig.</p>
<p>The essential E and fundamental F matrices are optional as they are not always available.
They may be computed from camera parameters, if needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>res1</strong> (<em>tuple</em>) – Resolution of camera as (width, height)</p></li>
<li><p><strong>res2</strong> (<em>tuple</em>) – Resolution of camera as (width, height)</p></li>
<li><p><strong>intrinsic1</strong> (<em>numpy.ndarray</em>) – 3x3 intrinsic camera matrix in the form [[fx, 0, tx], [0, fy, ty], [0, 0, 1]].</p></li>
<li><p><strong>intrinsic2</strong> (<em>numpy.ndarray</em>) – 3x3 intrinsic camera matrix in the form [[fx, 0, tx], [0, fy, ty], [0, 0, 1]].</p></li>
<li><p><strong>distCoeffs1</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em>) – List of distortion coefficients of 4, 5, 8, 12 or 14 elements (refer to OpenCV documentation).</p></li>
<li><p><strong>distCoeffs2</strong> (<em>list</em><em> or </em><em>numpy.ndarray</em>) – List of distortion coefficients of 4, 5, 8, 12 or 14 elements (refer to OpenCV documentation).</p></li>
<li><p><strong>R</strong> (<em>numpy.ndarray</em>) – Rotation matrix between the 1st and the 2nd camera coordinate systems as numpy.ndarray.</p></li>
<li><p><strong>T</strong> (<em>numpy.ndarray</em>) – Translation vector between the coordinate systems of the cameras as numpy.ndarray.</p></li>
<li><p><strong>E</strong> (<em>numpy.ndarray</em><em>, </em><em>optional</em>) – Essential matrix as numpy.ndarray (default None) .</p></li>
<li><p><strong>F</strong> (<em>numpy.ndarray</em><em>, </em><em>optional</em>) – Fundamental matrix as numpy.ndarray (default None).</p></li>
<li><p><strong>reprojectionError</strong> (<em>float</em><em>, </em><em>optional</em>) – Total reprojection error resulting from calibration (default None).</p></li>
<li><p><strong>note::</strong> (<em>..</em>) – This class follows OpenCV convention to set the origin of the world coordinate system into the first camera.
Hence the first camera extrinsics parameters will always be identity matrix rotation and zero translation.
If your world coordinate system is placed into a camera, you must convert it to use this class
(see <a class="reference internal" href="#simplestereo.utils.moveExtrinsicOriginToFirstCamera" title="simplestereo.utils.moveExtrinsicOriginToFirstCamera"><code class="xref py py-func docutils literal notranslate"><span class="pre">simplestereo.utils.moveExtrinsicOriginToFirstCamera()</span></code></a>).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StereoRig.fromFile">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">fromFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StereoRig.fromFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StereoRig.fromFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative initialization of StereoRig object from JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – Path of the JSON file containing saved parameters of the stereo rig.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An object of StereoRig class.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig">StereoRig</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StereoRig.getBaseline">
<span class="sig-name descname"><span class="pre">getBaseline</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StereoRig.getBaseline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StereoRig.getBaseline" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the norm of the vector from camera 1 to camera 2.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Length of the baseline in world units.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StereoRig.getCenters">
<span class="sig-name descname"><span class="pre">getCenters</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StereoRig.getCenters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StereoRig.getCenters" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate camera centers in world coordinates.</p>
<p>Anyway first camera will always be centered in zero (returned anyway).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>numpy.ndarray</em> – 3D coordinates of first camera center (always zero).</p></li>
<li><p><em>numpy.ndarray</em> – 3D coordinates of second camera center.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StereoRig.getEssentialMatrix">
<span class="sig-name descname"><span class="pre">getEssentialMatrix</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StereoRig.getEssentialMatrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StereoRig.getEssentialMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the essential matrix E.</p>
<p>If not set, E is computed from the fundamental matrix F and the camera matrices.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>E</strong> – The 3x3 essential matrix.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The essential matrix has always a free scaling factor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StereoRig.getFundamentalMatrix">
<span class="sig-name descname"><span class="pre">getFundamentalMatrix</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StereoRig.getFundamentalMatrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StereoRig.getFundamentalMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the fundamental matrix F.</p>
<p>If not set, F is computed from projection matrices using
<a class="reference internal" href="#simplestereo.calibration.getFundamentalMatrixFromProjections" title="simplestereo.calibration.getFundamentalMatrixFromProjections"><code class="xref py py-func docutils literal notranslate"><span class="pre">simplestereo.calibration.getFundamentalMatrixFromProjections()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><strong>F</strong> – The 3x3 fundamental matrix.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>numpy.ndarray</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The fundamental matrix has always a free scaling factor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StereoRig.getProjectionMatrices">
<span class="sig-name descname"><span class="pre">getProjectionMatrices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StereoRig.getProjectionMatrices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StereoRig.getProjectionMatrices" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the projection matrices of camera 1 and camera 2.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>numpy.ndarray</em> – The 3x4 projection matrix of the first camera.</p></li>
<li><p><em>numpy.ndarray</em> – The 3x4 projection matrix of the second camera.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StereoRig.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StereoRig.save"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StereoRig.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save configuration to JSON file.</p>
<p>Save the current stereo rig configuration to a JSON file that can be loaded later.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – Path where to save the JSON file containing the parameters of the stereo rig.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StereoRig.undistortImages">
<span class="sig-name descname"><span class="pre">undistortImages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">changeCameras</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destDims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">centerPrincipalPoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StereoRig.undistortImages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StereoRig.undistortImages" title="Permalink to this definition">¶</a></dt>
<dd><p>Undistort two given images of the stereo rig.</p>
<p>This method wraps <cite>cv2.getOptimalNewCameraMatrix()</cite> followed
by <cite>cv2.undistort()</cite> for both images.
If changeCameras is False, original camera matrices are used,
otherwise all the parameters of
<cite>cv2.getOptimalNewCameraMatrix()</cite> are considered when
undistorting the images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img1</strong> (<em>cv2.Mat</em>) – A couple of OpenCV images taken with the stereo rig (ordered).</p></li>
<li><p><strong>img2</strong> (<em>cv2.Mat</em>) – A couple of OpenCV images taken with the stereo rig (ordered).</p></li>
<li><p><strong>changeCameras</strong> (<em>bool</em>) – If False (default) the original camera matrices are used and all the following parameters are skipped.
If True, new camera matrices are computed with the given parameters.</p></li>
<li><p><strong>alpha</strong> (<em>float</em>) – Scaling parameter for both images.
If alpha=0, it returns undistorted image with minimum unwanted pixels
(so it may even remove some pixels at image corners). If alpha=1, all pixels are retained
with some extra black images. Values in the middle are accepted too (default to 1).</p></li>
<li><p><strong>destDims</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Resolution of destination images as (width, height) tuple (default to first image resolution).</p></li>
<li><p><strong>centerPrincipalPoint</strong> (<em>bool</em>) – If True the principal point is centered within the images (default to False).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>img1_undist, img2_undist</strong> (<em>cv2.Mat</em>) – The undistorted images.</p></li>
<li><p><strong>cameraMatrixNew1, cameraMatrixNew2</strong> (<em>numpy.ndarray</em>) – If <em>changeCameras</em> is set to True, the new camera matrices are returned too.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">cv2.getOptimalNewCameraMatrix</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">cv2.undistort</span></code></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.StructuredLightRig">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.</span></span><span class="sig-name descname"><span class="pre">StructuredLightRig</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StructuredLightRig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StructuredLightRig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><code class="xref py py-class docutils literal notranslate"><span class="pre">simplestereo.StereoRig</span></code></a></p>
<p>StereoRig child class with structured light methods.</p>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StructuredLightRig.fromFile">
<span class="sig-name descname"><span class="pre">fromFile</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StructuredLightRig.fromFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StructuredLightRig.fromFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative initialization of StereoRig object from JSON file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filepath</strong> (<em>str</em>) – Path of the JSON file containing saved parameters of the stereo rig.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An object of StereoRig class.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig">StereoRig</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StructuredLightRig.triangulate">
<span class="sig-name descname"><span class="pre">triangulate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">camPoints</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projPoints</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StructuredLightRig.triangulate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StructuredLightRig.triangulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Given camera-projector correspondences, proceed with
triangulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>camPoints</strong> (<em>numpy.ndarray</em>) – Ordered corresponding coordinates as (x, y) couples from
camera and projector. Last dimension must be 2.
Camera points must be already undistorted.</p></li>
<li><p><strong>projPoints</strong> (<em>numpy.ndarray</em>) – Ordered corresponding coordinates as (x, y) couples from
camera and projector. Last dimension must be 2.
Camera points must be already undistorted.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>3D coordinates with shape (-1, 1, 3).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.StructuredLightRig.undistortCameraImage">
<span class="sig-name descname"><span class="pre">undistortCameraImage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imgObj</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo.html#StructuredLightRig.undistortCameraImage"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.StructuredLightRig.undistortCameraImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Undistort camera image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>imgObj</strong> (<em>numpy.ndarray</em>) – Camera image.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Undistorted image.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</section>
<section id="module-simplestereo.active">
<span id="simplestereo-active-module"></span><h2>simplestereo.active module<a class="headerlink" href="#module-simplestereo.active" title="Permalink to this headline">¶</a></h2>
<section id="active">
<h3>active<a class="headerlink" href="#active" title="Permalink to this headline">¶</a></h3>
<p>Contains classes to manage active stereo algorithms and helper
functions.
This module contains both conventional active stereo (2 cameras +
projector) and structured-light (1 camera + projector) methods.</p>
<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.active.GrayCode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">GrayCode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#GrayCode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.GrayCode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for the Gray code method from OpenCV.</p>
<p>Structured-light implementation using camera-projector
calibrated rig.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – A stereo rig object with camera in position 1 (world origin) and projector in
position 2.</p></li>
<li><p><strong>black_thr</strong> (<em>int</em><em>, </em><em>optional</em>) – Black threshold is a number between 0-255 that represents the
minimum brightness difference required for valid pixels, between
the fully illuminated (white) and the not illuminated images
(black); used in computeShadowMasks method. Default to 40.</p></li>
<li><p><strong>white_thr</strong> (<em>int</em><em>, </em><em>optional</em>) – White threshold is a number between 0-255 that represents the
minimum brightness difference required for valid pixels, between
the graycode pattern and its inverse images; used in
<cite>getProjPixel</cite> method. Default to 5.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Projector distortion may be unaccurate, especially along border.
If this is the case, you can ignore it setting
<cite>rig.distCoeffs2 == None</cite> before passing <cite>rig</cite> to the constructor
or setting a narrow <cite>roi</cite>.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.active.GrayCode.getCloud">
<span class="sig-name descname"><span class="pre">getCloud</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#GrayCode.getCloud"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.GrayCode.getCloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the 3D point calculation from a list of images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> (<em>list</em><em> or </em><em>tuple</em>) – A list of image <em>paths</em> acquired by the camera.
Each set must be ordered like all the Gray code patterns
(see <cite>cv2.structured_light_GrayCodePattern</cite>).
Any following extra image will be ignored (es. full white).</p></li>
<li><p><strong>roi</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Region of interest in the format (x,y,width,height)
where x,y is the upper left corner. Default to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Points with shape (n,1,3)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>Add possibility to return point cloud in same image/roi
shape with NaN in invalid locations.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.active.GrayCodeDouble">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">GrayCodeDouble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projRes</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#GrayCodeDouble"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.GrayCodeDouble" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Wrapper for the Gray code method from OpenCV.</p>
<p>Conventional active stereo implementation, i.e. using two calibrated cameras and
one uncalibrated projector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – A stereo rig object with two cameras.</p></li>
<li><p><strong>projRes</strong> (<em>tuple</em>) – Projector resolution as (width, height).</p></li>
<li><p><strong>black_thr</strong> (<em>int</em><em>, </em><em>optional</em>) – Black threshold is a number between 0-255 that represents the
minimum brightness difference required for valid pixels, between
the fully illuminated (white) and the not illuminated images
(black); used in computeShadowMasks method. Default to 40.</p></li>
<li><p><strong>white_thr</strong> (<em>int</em><em>, </em><em>optional</em>) – White threshold is a number between 0-255 that represents the
minimum brightness difference required for valid pixels, between
the graycode pattern and its inverse images; used in
<cite>getProjPixel</cite> method. Default to 5.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>Projector distortion may be unaccurate, especially along border.
If this is the case, you can ignore it setting
<cite>rig.distCoeffs2 == None</cite> before passing <cite>rig</cite> to the constructor
or setting a narrow <cite>roi</cite>.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.active.GrayCodeDouble.getCloud">
<span class="sig-name descname"><span class="pre">getCloud</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#GrayCodeDouble.getCloud"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.GrayCodeDouble.getCloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform the 3D point calculation from a list of images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> (<em>list</em><em> or </em><em>tuple</em>) – A list (or tuple) of 2 dimensional tuples (ordered left and
right) of image paths, e.g. [(“oneL.png”,”oneR.png”),
(“twoL.png”,”twoR.png”), …]
Each set must be ordered like all the Gray code patterns
(see <cite>cv2.structured_light_GrayCodePattern</cite>).
Any following extra image will be ignored (es. full white).</p></li>
<li><p><strong>roi1</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Region of interest on camera 1 in the format
(x,y,width,height) where x,y is the upper left corner.
Default to None.</p></li>
<li><p><strong>roi2</strong> (<em>tuple</em><em>, </em><em>optional</em>) – As <cite>roi1</cite>, but for camera 2.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Points with shape (n,1,3)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="simplestereo.active.GrayCodeSingle">
<span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">GrayCodeSingle</span></span><a class="headerlink" href="#simplestereo.active.GrayCodeSingle" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#simplestereo.active.GrayCode" title="simplestereo.active.GrayCode"><code class="xref py py-class docutils literal notranslate"><span class="pre">simplestereo.active.GrayCode</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTP">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">StereoFTP</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stereoRig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fringe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeColor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeSensitivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTP"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTP" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manager of the Stereo Fourier Transform Profilometry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stereoRig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – A stereo rig object with camera in position 1 (world origin) and projector in
position 2.</p></li>
<li><p><strong>fringeDims</strong> (<em>tuple</em>) – Dimensions of projector image as (width, height).</p></li>
<li><p><strong>period</strong> (<em>float</em>) – Period of the fringe (in pixels).</p></li>
<li><p><strong>stripeColor</strong> (<em>str</em><em>, </em><em>optional</em>) – BGR color used for the central stripe to be chosen among “blue”,
“green” or “red”. Also “b”, “g”, “r” accepted.
Default to “red”.</p></li>
<li><p><strong>stripeSensitivity</strong> (<em>float</em><em>, </em><em>optional</em>) – Sensitivity to find the stripe. See <a class="reference internal" href="#simplestereo.active.findCentralStripe" title="simplestereo.active.findCentralStripe"><code class="xref py py-func docutils literal notranslate"><span class="pre">findCentralStripe()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Working details in the paper Pasquale Lafiosca et al.,
“Automated Aircraft Dent Inspection via a Modified Fourier
Transform Profilometry Algorithm”,
Sensors, 2022, <a class="reference external" href="https://doi.org/10.3390/s22020433">https://doi.org/10.3390/s22020433</a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTP.convertGrayscale">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">convertGrayscale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTP.convertGrayscale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTP.convertGrayscale" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert to grayscale using max.</p>
<p>This keeps highest BGR value over the central stripe
(e.g. (0,0,255) -&gt; 255), allowing the FFT to work properly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>numpy.ndarray</em>) – BGR image.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Grayscale image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>Gamma correction may be implemented as a parameter.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>I’ve tried different approaches, but the simple <cite>max</cite>
works best at converting the stripe to white.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTP.getCloud">
<span class="sig-name descname"><span class="pre">getCloud</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imgObj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unwrappingMethod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTP.getCloud"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTP.getCloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an image and get the point cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imgObj</strong> (<em>numpy.ndarray</em>) – BGR image acquired by the camera.</p></li>
<li><p><strong>radius_factor</strong> (<em>float</em><em>, </em><em>optional</em>) – Radius factor of the pass-band filter. Default to 0.5.</p></li>
<li><p><strong>roi</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Region of interest in the format (x,y,width,height)
where x,y is the upper left corner. Default to None.</p></li>
<li><p><strong>unwrappingMethod</strong> (<em>function</em><em>, </em><em>optional</em>) – Pointer to chosen unwrapping function. It must take the phase
as the only argument. If None (default), <a href="#id5"><span class="problematic" id="id6">`</span></a>np.unwrap`is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Point cloud with shape (height,width,3), with height and width</em></p></li>
<li><p>same as the input image or selected <cite>roi</cite>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTPAnaglyph">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">StereoFTPAnaglyph</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stereoRig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fringe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeColor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeSensitivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTPAnaglyph"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTPAnaglyph" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#simplestereo.active.StereoFTP" title="simplestereo.active.StereoFTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">simplestereo.active.StereoFTP</span></code></a></p>
<p>Manager of the Stereo Fourier Transform Profilometry using an
anaglyph pattern build with <a class="reference internal" href="#simplestereo.active.buildAnaglyphFringe" title="simplestereo.active.buildAnaglyphFringe"><code class="xref py py-func docutils literal notranslate"><span class="pre">buildAnaglyphFringe()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stereoRig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – A stereo rig object with camera in position 1 (world origin) and projector in
position 2.</p></li>
<li><p><strong>fringeDims</strong> (<em>tuple</em>) – Dimensions of projector image as (width, height).</p></li>
<li><p><strong>period</strong> (<em>float</em>) – Period of the fringe (in pixels).</p></li>
<li><p><strong>stripeColor</strong> (<em>str</em><em>, </em><em>optional</em>) – BGR color used for the central stripe to be chosen among “blue”,
“green” or “red”. Also “b”, “g”, “r” accepted.
Default to “red”.</p></li>
<li><p><strong>stripeSensitivity</strong> (<em>float</em><em>, </em><em>optional</em>) – Sensitivity to find the stripe. See <a class="reference internal" href="#simplestereo.active.findCentralStripe" title="simplestereo.active.findCentralStripe"><code class="xref py py-func docutils literal notranslate"><span class="pre">findCentralStripe()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a work in progress.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTPAnaglyph.convertGrayscale">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">convertGrayscale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTPAnaglyph.convertGrayscale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTPAnaglyph.convertGrayscale" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert to grayscale using Guo et al., “Improved fourier
transform profilometry for the automatic measurement of 3D
object shapes”, 1990.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>numpy.ndarray</em>) – BGR image.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Grayscale image as float.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id7">
<p class="admonition-title">Todo</p>
<p>Gamma correction may be implemented as a parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTPAnaglyph.getCloud">
<span class="sig-name descname"><span class="pre">getCloud</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imgObj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unwrappingMethod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTPAnaglyph.getCloud"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTPAnaglyph.getCloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an anaglyph image and get the point cloud.</p>
<p>The pattern expected to be projected on the object is the one
produced by <cite>:func:buildAnaglyphFringe</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imgObj</strong> (<em>numpy.ndarray</em>) – BGR image acquired by the camera.</p></li>
<li><p><strong>radius_factor</strong> (<em>float</em><em>, </em><em>optional</em>) – Radius factor of the pass-band filter. Default to 0.5.</p></li>
<li><p><strong>roi</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Region of interest in the format (x,y,width,height)
where x,y is the upper left corner. Default to None.</p></li>
<li><p><strong>unwrappingMethod</strong> (<em>function</em><em>, </em><em>optional</em>) – Pointer to chosen unwrapping function. It must take the phase
as the only argument. If None (default), <a href="#id8"><span class="problematic" id="id9">`</span></a>np.unwrap`is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Point cloud with shape (height,width,3), with height and width</em></p></li>
<li><p>same as the input image or selected <cite>roi</cite>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTP_Mapping">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">StereoFTP_Mapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stereoRig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fringe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeColor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeSensitivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTP_Mapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTP_Mapping" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#simplestereo.active.StereoFTP" title="simplestereo.active.StereoFTP"><code class="xref py py-class docutils literal notranslate"><span class="pre">simplestereo.active.StereoFTP</span></code></a></p>
<p>Manager of the classic Stereo Fourier Transform Profilometry.</p>
<p>Classic method (does not use a virtual reference plane) but it does
use the automatic band-pass estimation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stereoRig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – A stereo rig object with camera in position 1 (world origin) and projector in
position 2.</p></li>
<li><p><strong>fringeDims</strong> (<em>tuple</em>) – Dimensions of projector image as (width, height).</p></li>
<li><p><strong>period</strong> (<em>float</em>) – Period of the fringe (in pixels).</p></li>
<li><p><strong>stripeColor</strong> (<em>str</em><em>, </em><em>optional</em>) – BGR color used for the central stripe to be chosen among “blue”,
“green” or “red”. Also “b”, “g”, “r” accepted.
Default to “red”.</p></li>
<li><p><strong>stripeSensitivity</strong> (<em>float</em><em>, </em><em>optional</em>) – Sensitivity to find the stripe. See <a class="reference internal" href="#simplestereo.active.findCentralStripe" title="simplestereo.active.findCentralStripe"><code class="xref py py-func docutils literal notranslate"><span class="pre">findCentralStripe()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTP_Mapping.getCloud">
<span class="sig-name descname"><span class="pre">getCloud</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imgObj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unwrappingMethod</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTP_Mapping.getCloud"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTP_Mapping.getCloud" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an image and get the point cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imgObj</strong> (<em>numpy.ndarray</em>) – BGR image acquired by the camera.</p></li>
<li><p><strong>radius_factor</strong> (<em>float</em><em>, </em><em>optional</em>) – Radius factor of the pass-band filter. Default to 0.5.</p></li>
<li><p><strong>roi</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Region of interest in the format (x,y,width,height)
where x,y is the upper left corner. Default to None.</p></li>
<li><p><strong>unwrappingMethod</strong> (<em>function</em><em>, </em><em>optional</em>) – Pointer to chosen unwrapping function. It must take the phase
as the only argument. If None (default), <a href="#id10"><span class="problematic" id="id11">`</span></a>np.unwrap`is used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Point cloud with shape (height,width,3), with height and width</em></p></li>
<li><p>same as the input image or selected <cite>roi</cite>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTP_PhaseOnly">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">StereoFTP_PhaseOnly</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stereoRig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fringe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeColor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'red'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeSensitivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTP_PhaseOnly"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTP_PhaseOnly" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manager of the Stereo Fourier Transform Profilometry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stereoRig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – A stereo rig object with camera in position 1 (world origin) and projector in
position 2.</p></li>
<li><p><strong>fringeDims</strong> (<em>tuple</em>) – Dimensions of projector image as (width, height).</p></li>
<li><p><strong>period</strong> (<em>float</em>) – Period of the fringe (in pixels).</p></li>
<li><p><strong>stripeColor</strong> (<em>str</em><em>, </em><em>optional</em>) – BGR color used for the central stripe to be chosen among “blue”,
“green” or “red”. Also “b”, “g”, “r” accepted.
Default to “red”.</p></li>
<li><p><strong>stripeSensitivity</strong> (<em>float</em><em>, </em><em>optional</em>) – Sensitivity to find the stripe. See <a class="reference internal" href="#simplestereo.active.findCentralStripe" title="simplestereo.active.findCentralStripe"><code class="xref py py-func docutils literal notranslate"><span class="pre">findCentralStripe()</span></code></a>.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTP_PhaseOnly.convertGrayscale">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">convertGrayscale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTP_PhaseOnly.convertGrayscale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTP_PhaseOnly.convertGrayscale" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert to grayscale using max.</p>
<p>This keeps highest BGR value over the central stripe
(e.g. (0,0,255) -&gt; 255), allowing the FFT to work properly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>image</strong> (<em>numpy.ndarray</em>) – BGR image.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Grayscale image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id12">
<p class="admonition-title">Todo</p>
<p>Gamma correction may be implemented as a parameter.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.active.StereoFTP_PhaseOnly.getPhase">
<span class="sig-name descname"><span class="pre">getPhase</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">imgObj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">radius_factor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#StereoFTP_PhaseOnly.getPhase"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.StereoFTP_PhaseOnly.getPhase" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an image and get the point cloud.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>imgObj</strong> (<em>numpy.ndarray</em>) – BGR image acquired by the camera.</p></li>
<li><p><strong>radius_factor</strong> (<em>float</em><em>, </em><em>optional</em>) – Radius factor of the pass-band filter. Default to 0.5.</p></li>
<li><p><strong>roi</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Region of interest in the format (x,y,width,height)
where x,y is the upper left corner. Default to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>Point cloud with shape (height,width,3), with height and width</em></p></li>
<li><p>same as the input image or selected <cite>roi</cite>.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.active.buildAnaglyphFringe">
<span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">buildAnaglyphFringe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">period=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims=(1280</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">720)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertical=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;MagicMock</span> <span class="pre">id='140033210332832'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#buildAnaglyphFringe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.buildAnaglyphFringe" title="Permalink to this definition">¶</a></dt>
<dd><p>Build sinusoidal anaglyph fringe image.</p>
<p>Assumes BGR images, using blue and red as complementary colors and
green as central stripe. This allows to actually extract three
different images from a single scan. Red and blue can be subtracted
to suppress DC component. Green serves the purpose to obtain a
reference phase in the FTP algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>period</strong> (<em>float</em>) – Fringe period along x axis, in pixels.</p></li>
<li><p><strong>shift</strong> (<em>float</em>) – Shift to apply. Default to 0.</p></li>
<li><p><strong>dims</strong> (<em>tuple</em>) – Image dimensions as (width, height).</p></li>
<li><p><strong>vertical</strong> (<em>bool</em>) – If True, fringe is build along vertical. Default to False (horizontal).</p></li>
<li><p><strong>dtype</strong> (<em>numpy.dtype</em>) – Image is scaled in the range 0 - max value to match <cite>dtype</cite>.
Default np.uint8 (max 255).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fringe image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.active.buildBinaryFringe">
<span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">buildBinaryFringe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">period=10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims=(1280</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">720)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertical=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeColor=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;MagicMock</span> <span class="pre">id='140033210465008'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#buildBinaryFringe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.buildBinaryFringe" title="Permalink to this definition">¶</a></dt>
<dd><p>Build binary fringe image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>period</strong> (<em>int</em>) – Fringe period along x axis, in pixels. An integer is expected.
If a float is passed, it will be converted to integer.</p></li>
<li><p><strong>shift</strong> (<em>float</em>) – Shift to apply. Default to 0.</p></li>
<li><p><strong>dims</strong> (<em>tuple</em>) – Image dimensions as (width, height).</p></li>
<li><p><strong>vertical</strong> (<em>bool</em>) – If True, fringe is build along vertical. Default to False
(horizontal fringe direction).</p></li>
<li><p><strong>stripeColor</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stripe chosen from ‘blue’,’green’ or ‘red’.
Also ‘b’, ‘g’, ‘r’ are accepted.
Default to None (no stripe drawn).</p></li>
<li><p><strong>dtype</strong> (<em>numpy.dtype</em>) – Image is scaled in the range 0 - max value to match <cite>dtype</cite>.
Default np.uint8 (max 255).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fringe image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.active.buildFringe">
<span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">buildFringe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shift=0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims=(1280</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">720)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vertical=False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stripeColor=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dtype=&lt;MagicMock</span> <span class="pre">id='140033209989296'&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#buildFringe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.buildFringe" title="Permalink to this definition">¶</a></dt>
<dd><p>Build sinusoidal fringe image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>period</strong> (<em>float</em>) – Fringe period along x axis, in pixels.</p></li>
<li><p><strong>shift</strong> (<em>float</em><em>, </em><em>optional</em>) – Shift to apply. Default to 0.</p></li>
<li><p><strong>dims</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Image dimensions as (width, height). Default to (1280,720).</p></li>
<li><p><strong>vertical</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, fringe is build along vertical. Default to False
(horizontal).</p></li>
<li><p><strong>stripeColor</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the stripe chosen from ‘blue’,’green’ or ‘red’.
Also ‘b’, ‘g’, ‘r’ are accepted.
Default to None (no stripe drawn).</p></li>
<li><p><strong>dtype</strong> (<em>numpy.dtype</em>) – Image is scaled in the range 0 - max value to match <cite>dtype</cite>.
Default np.uint8 (max 255).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Fringe image.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.active.computeROI">
<span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">computeROI</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blackThreshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extraMargin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#computeROI"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.computeROI" title="Permalink to this definition">¶</a></dt>
<dd><p>Exclude black regions along borders.</p>
<p>Usually the projector does not illuminate the whole image area.
This function attempts to find the region of interest as a rectangle
inside the biggest contour.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img</strong> (<em>numpy.ndarray</em>) – Camera image with black borders.</p></li>
<li><p><strong>blackThreshold</strong> (<em>int</em><em>, </em><em>optional</em>) – Threshold for the black regions between 0 and 255.
Default to 10.</p></li>
<li><p><strong>extraMargin</strong> (<em>int</em><em>, </em><em>optional</em>) – Extra safety margin to reduce to ROI. Default to 0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>tuple</em> – ROI as tuple of integers (x,y,w,h).</p></li>
<li><p><em>.. note:: To rewrite completely. Not suitable for production.</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.active.findCentralStripe">
<span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">findCentralStripe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'r'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensitivity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interpolation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#findCentralStripe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.findCentralStripe" title="Permalink to this definition">¶</a></dt>
<dd><p>Find coordinates of a colored stripe in the image.</p>
<p>Search is done with subpixel accuracy only along the x-axis
direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>numpy.ndarray</em>) – BGR image with a colored vertical stripe.</p></li>
<li><p><strong>color</strong> (<em>str</em><em>, </em><em>optional</em>) – Color of the original stripe as ‘blue’,’green’ or ‘red’.
Also ‘b’, ‘g’, ‘r’ are accepted.
Default to ‘red’.</p></li>
<li><p><strong>sensitivity</strong> (<em>float</em><em>, </em><em>optional</em>) – Sensitivity for color matching in [0,1]. Default to 0.5.</p></li>
<li><p><strong>interpolation</strong> (<em>str</em>) – See <cite>scipy.interpolate.interp1d</cite> <cite>kind</cite> parameter.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>x,y coordinates of stripe centers with shape (n,2).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The search is done along a single dimension, the x-axis.
Missing values are filled with nearest-value interpolation.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.active.generateGrayCodeImgs">
<span class="sig-prename descclassname"><span class="pre">simplestereo.active.</span></span><span class="sig-name descname"><span class="pre">generateGrayCodeImgs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">targetDir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/active.html#generateGrayCodeImgs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.active.generateGrayCodeImgs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate Gray Codes and save it to PNG images.</p>
<p>Starts from the couple of images <em>0.png</em> and <em>1.png</em> (one is the
inverse of the other). Then 2.png is coupled with 3.png and so on.
First half contains vertical stripes, followed by horizontal ones.
The function stores also a <em>black.png</em> and <em>white.png</em> images for
threshold calibration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>targetDir</strong> (<em>string</em>) – Path to the directory where to save Gray codes. Directory is created if not exists.</p></li>
<li><p><strong>resolution</strong> (<em>tuple</em>) – Pixel dimensions of the images as (width, height) tuple (to be matched with projector resolution).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Number of generated patterns (black and white are <em>not</em> considered in this count).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="module-simplestereo.calibration">
<span id="simplestereo-calibration-module"></span><h2>simplestereo.calibration module<a class="headerlink" href="#module-simplestereo.calibration" title="Permalink to this headline">¶</a></h2>
<section id="calibration">
<h3>calibration<a class="headerlink" href="#calibration" title="Permalink to this headline">¶</a></h3>
<p>Contains different calibration algorithms.</p>
<div class="admonition-todo admonition" id="id13">
<p class="admonition-title">Todo</p>
<p>Implement circles calibration. N.B. after using <code class="docutils literal notranslate"><span class="pre">cv2.findCirclesGrid()</span></code> a point refinement algorithm is needed (like  <code class="docutils literal notranslate"><span class="pre">cv2.cornerSubPix()</span></code> does for the chessboard).</p>
</div>
<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.calibration.chessboardProCam">
<span class="sig-prename descclassname"><span class="pre">simplestereo.calibration.</span></span><span class="sig-name descname"><span class="pre">chessboardProCam</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projectorResolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chessboardSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(6,</span> <span class="pre">7)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squareSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camIntrinsic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camDistCoeffs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/calibration.html#chessboardProCam"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.calibration.chessboardProCam" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs stereo calibration between a camera (reference) and a projector.</p>
<p>Adapted from the code available (MIT licence) at <a class="reference external" href="https://github.com/kamino410/procam-calibration">https://github.com/kamino410/procam-calibration</a>
and based on the paper of Daniel Moreno and Gabriel Taubin, “Simple, accurate, and
robust projector-camera calibration”, DOI: 10.1109/3DIMPVT.2012.77.
The camera will be put in world origin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> (<em>list</em><em> or </em><em>tuple</em>) – A list of lists (one per set) of image paths acquired by the camera.
Each set must be ordered like all the Gray code patterns (see <code class="docutils literal notranslate"><span class="pre">cv2.structured_light_GrayCodePattern</span></code>)
followed by black, normal light and white images (in this order).
At least 5-6 sets are suggested.</p></li>
<li><p><strong>projectorResolution</strong> (<em>tuple</em>) – Projector pixel resolution as (width, height).</p></li>
<li><p><strong>chessboardSize</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Chessboard <em>internal</em> dimensions as (width, height). Dimensions should be different to avoid ambiguity.
Default to (7,6).</p></li>
<li><p><strong>squareSize</strong> (<em>float</em><em>, </em><em>optional</em>) – If the square size is known, calibration can be in metric units. Default to 1.</p></li>
<li><p><strong>black_thr</strong> (<em>int</em><em>, </em><em>optional</em>) – Black threshold is a number between 0-255 that represents the minimum brightness difference
required for valid pixels, between the fully illuminated (white) and the not illuminated images (black).
Default to 40.</p></li>
<li><p><strong>white_thr</strong> (<em>int</em><em>, </em><em>optional</em>) – White threshold is a number between 0-255 that represents the minimum brightness difference
required for valid pixels, between the graycode pattern and its inverse images. Default to 5.</p></li>
<li><p><strong>camIntrinsic</strong> (<em>list</em><em>, </em><em>optional</em>) – A 3x3 matrix representing camera intrinsic parameters. If not given it will be calculated.</p></li>
<li><p><strong>camIntrinsic</strong> – Camera distortion coefficients of 4, 5, 8, 12 or 14 elements (refer to OpenCV documentation).
If not given they will be calculated.</p></li>
<li><p><strong>normalize</strong> (<em>bool</em>) – If True, the images are min-max normalized before processing. Default to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>StereoRig</em> – A StereoRig object</p></li>
<li><p><em>.. todo::</em> – Iteratively exclude images that have high reprojection errors and re-calibrate.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.calibration.chessboardProCamWhite">
<span class="sig-prename descclassname"><span class="pre">simplestereo.calibration.</span></span><span class="sig-name descname"><span class="pre">chessboardProCamWhite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projectorResolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chessboardSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(6,</span> <span class="pre">7)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squareSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">black_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">40</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">white_thr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camIntrinsic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camDistCoeffs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extended</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/calibration.html#chessboardProCamWhite"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.calibration.chessboardProCamWhite" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs stereo calibration between a camera (reference) and a projector.</p>
<p>Requires a chessboard with <em>black</em> top-left square.
Adapted from the code available (MIT licence) at <a class="reference external" href="https://github.com/kamino410/procam-calibration">https://github.com/kamino410/procam-calibration</a>
and based on the paper of Daniel Moreno and Gabriel Taubin, “Simple, accurate, and
robust projector-camera calibration”, DOI: 10.1109/3DIMPVT.2012.77.
The camera will be put in world origin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> (<em>list</em><em> or </em><em>tuple</em>) – A list of lists (one per set) of image paths acquired by the camera.
Each set must be ordered like all the Gray code patterns (see <code class="docutils literal notranslate"><span class="pre">cv2.structured_light_GrayCodePattern</span></code>)
followed by black, normal light conditions and white images (in this exact order).
At least 5-6 sets are suggested.</p></li>
<li><p><strong>projectorResolution</strong> (<em>tuple</em>) – Projector pixel resolution as (width, height).</p></li>
<li><p><strong>chessboardSize</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Chessboard <em>internal</em> dimensions as (cols, rows). Dimensions should be different to avoid ambiguity.
Default to (6,7).</p></li>
<li><p><strong>squareSize</strong> (<em>float</em><em>, </em><em>optional</em>) – If the square size is known, calibration can be in metric units. Default to 1.</p></li>
<li><p><strong>black_thr</strong> (<em>int</em><em>, </em><em>optional</em>) – Black threshold is a number between 0-255 that represents the minimum brightness
difference required for valid pixels, between the fully illuminated (white) and
the not illuminated images (black); used in computeShadowMasks method.
Default to 40.</p></li>
<li><p><strong>white_thr</strong> (<em>int</em><em>, </em><em>optional</em>) – White threshold is a number between 0-255 that represents the minimum brightness difference
required for valid pixels, between the graycode pattern and its inverse images; used in
getProjPixel method.
Default to 5.</p></li>
<li><p><strong>camIntrinsic</strong> (<em>list</em><em>, </em><em>optional</em>) – A 3x3 matrix representing camera intrinsic parameters. If not given it will be calculated.</p></li>
<li><p><strong>camIntrinsic</strong> – Camera distortion coefficients of 4, 5, 8, 12 or 14 elements (refer to OpenCV documentation).
If not given they will be calculated.</p></li>
<li><p><strong>extended</strong> (<em>bool</em>) – If True, <cite>perViewErrors</cite> of the stereo calibration are returned. Default to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>StereoRig</em> – A StereoRig object</p></li>
<li><p><em>perViewErrors</em> – Returned only if <cite>extended</cite> is True. For each pattern view, the
RMS error of camera and projector is returned.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.calibration.chessboardSingle">
<span class="sig-prename descclassname"><span class="pre">simplestereo.calibration.</span></span><span class="sig-name descname"><span class="pre">chessboardSingle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chessboardSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(6,</span> <span class="pre">7)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squareSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showImages</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/calibration.html#chessboardSingle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.calibration.chessboardSingle" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate a single camera with a chessboard pattern.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> (<em>list</em><em> or </em><em>tuple</em>) – A list (or tuple) of image paths, e.g. [“one.png”, “two.png”, …]</p></li>
<li><p><strong>chessboardSize</strong> (<em>tuple</em>) – Chessboard <em>internal</em> dimensions as (width, height). Dimensions should be different to avoid ambiguity.
Default to (7,6).</p></li>
<li><p><strong>squareSize</strong> (<em>float</em>) – If the square size is known, calibration can be in metric units. Default to 1.</p></li>
<li><p><strong>showImages</strong> (<em>bool</em>) – If True, each processed image is showed to check for correct chessboard detection.
Default to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>retval</strong> (<em>bool</em>) – Same values of <cite>cv2.calibrateCamera</cite>.</p></li>
<li><p><strong>cameraMatrix</strong> (<em>numpy.ndarray</em>)</p></li>
<li><p><strong>distCoeffs</strong> (<em>numpy.ndarray</em>)</p></li>
<li><p><strong>rvecs</strong> (<em>numpy.ndarray</em>)</p></li>
<li><p><strong>tvecs</strong> (<em>numpy.ndarray</em>)</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.calibration.chessboardStereo">
<span class="sig-prename descclassname"><span class="pre">simplestereo.calibration.</span></span><span class="sig-name descname"><span class="pre">chessboardStereo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">images</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chessboardSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(6,</span> <span class="pre">7)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squareSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/calibration.html#chessboardStereo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.calibration.chessboardStereo" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs stereo calibration between two cameras and returns a StereoRig object.</p>
<p>First camera (generally left) will be put in world origin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>images</strong> (<em>list</em><em> or </em><em>tuple</em>) – A list (or tuple) of 2 dimensional tuples (ordered left and
right) of image paths, e.g. [(“oneL.png”,”oneR.png”),
(“twoL.png”,”twoR.png”), …]</p></li>
<li><p><strong>chessboardSize</strong> (<em>tuple</em>) – Chessboard <em>internal</em> dimensions as (width, height). Dimensions should be different to avoid ambiguity.
Default to (7,6).</p></li>
<li><p><strong>squareSize</strong> (<em>float</em>) – If the square size is known, calibration can be in metric units. Default to 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>StereoRig</em> – A StereoRig object</p></li>
<li><p><em>..todo::</em> – Iteratively exclude images that have high reprojection errors and re-calibrate.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.calibration.generateChessboardSVG">
<span class="sig-prename descclassname"><span class="pre">simplestereo.calibration.</span></span><span class="sig-name descname"><span class="pre">generateChessboardSVG</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chessboardSize</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squareSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">border</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/calibration.html#generateChessboardSVG"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.calibration.generateChessboardSVG" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the desired chessboard to a SVG file.</p>
<p><em>chessboardSize</em> is expressed as (columns, rows) tuple, counting <em>internal line</em> columns and rows
as OpenCV does (e.g. to obtain a 10x7 chessboard, use (9,6)).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>chessboardSize</strong> (<em>tuple</em>) – Size of the chessboard as (columns, rows).</p></li>
<li><p><strong>filepath</strong> (<em>string</em>) – File path where to save the SVG file.</p></li>
<li><p><strong>squareSize</strong> (<em>int</em>) – Side of the square in millimeters. Default to 20. However it may not be represented exactly, depending on software.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.calibration.getFundamentalMatrixFromProjections">
<span class="sig-prename descclassname"><span class="pre">simplestereo.calibration.</span></span><span class="sig-name descname"><span class="pre">getFundamentalMatrixFromProjections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">P1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">P2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/calibration.html#getFundamentalMatrixFromProjections"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.calibration.getFundamentalMatrixFromProjections" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the fundamental matrix from two projection matrices.</p>
<p>The algorithm is adapted from an original lesson of Cristina Turrini, UNIMI, Trento (09/04/2017).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>P1</strong> (<em>numpy.ndarray</em>) – 3x4 camera projection matrices.</p></li>
<li><p><strong>P2</strong> (<em>numpy.ndarray</em>) – 3x4 camera projection matrices.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>F</strong> – The 3x3 fundamental matrix.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.calibration.phaseShift">
<span class="sig-prename descclassname"><span class="pre">simplestereo.calibration.</span></span><span class="sig-name descname"><span class="pre">phaseShift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">periods</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projectorResolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cameraImages</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chessboardSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(6,</span> <span class="pre">7)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squareSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camIntrinsic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camDistCoeffs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/calibration.html#phaseShift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.calibration.phaseShift" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate camera and projector using phase shifting and the
heterodyne principle [Reich 1997].</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>periods</strong> (<em>list of lists</em>) – Periods of fringe used in the projector as list of lists.
First list is for the horizontal fringes, second for the vertical ones.
In descending order (e.g. 1280, 1024, 512, …).</p></li>
<li><p><strong>projectorResolution</strong> (<em>tuple</em>) – Projector pixel resolution as (width, height).</p></li>
<li><p><strong>cameraImages</strong> (<em>list</em><em> or </em><em>tuple</em>) – A list of lists (one per set) of image paths acquired by the camera.
Each set must be ordered, having 4 images for each period with
horizontal followed by vertical images.
In each set, last image is the one in normal light conditions.
At least 5-6 sets are suggested.</p></li>
<li><p><strong>chessboardSize</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Chessboard <em>internal</em> dimensions as (cols, rows). Dimensions should be different to avoid ambiguity.
Default to (6,7).</p></li>
<li><p><strong>squareSize</strong> (<em>float</em><em>, </em><em>optional</em>) – If the square size is known, calibration can be in metric units. Default to 1.</p></li>
<li><p><strong>camIntrinsic</strong> (<em>list</em><em>, </em><em>optional</em>) – A 3x3 matrix representing camera intrinsic parameters. If not given it will be calculated.</p></li>
<li><p><strong>camIntrinsic</strong> – Camera distortion coefficients of 4, 5, 8, 12 or 14 elements (refer to OpenCV documentation).
If not given they will be calculated.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A StereoRig object</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig">StereoRig</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.calibration.phaseShiftWhite">
<span class="sig-prename descclassname"><span class="pre">simplestereo.calibration.</span></span><span class="sig-name descname"><span class="pre">phaseShiftWhite</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">periods</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projectorResolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cameraImages</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chessboardSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(6,</span> <span class="pre">7)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squareSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camIntrinsic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camDistCoeffs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extended</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/calibration.html#phaseShiftWhite"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.calibration.phaseShiftWhite" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate camera and projector using phase shifting and heterodyne
principle [Reich 1997]. Using center of white squares instead of
corners as targets.</p>
<p>The center of a white square is well defined and less subject to
noise or uncertanty of the phase value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>periods</strong> (<em>list of lists</em>) – Periods of fringe used in the projector as list of lists.
First list is for the horizontal fringes, second for the vertical ones.
In descending order (e.g. 1280, 1024, 512, …).</p></li>
<li><p><strong>projectorResolution</strong> (<em>tuple</em>) – Projector pixel resolution as (width, height).</p></li>
<li><p><strong>cameraImages</strong> (<em>list</em><em> or </em><em>tuple</em>) – A list of lists (one per set) of image paths acquired by the camera.
Each set must be ordered, having 4 images for each period with
horizontal followed by vertical images.
In each set, last image is the one in normal light conditions.
At least 5-6 sets are suggested.</p></li>
<li><p><strong>chessboardSize</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Chessboard <em>internal</em> dimensions as (cols, rows). Dimensions should be different to avoid ambiguity.
Default to (6,7).</p></li>
<li><p><strong>squareSize</strong> (<em>float</em><em>, </em><em>optional</em>) – If the square size is known, calibration can be in metric units. Default to 1.</p></li>
<li><p><strong>camIntrinsic</strong> (<em>list</em><em>, </em><em>optional</em>) – A 3x3 matrix representing camera intrinsic parameters. If not given it will be calculated.</p></li>
<li><p><strong>camIntrinsic</strong> – Camera distortion coefficients of 4, 5, 8, 12 or 14 elements (refer to OpenCV documentation).
If not given they will be calculated.</p></li>
<li><p><strong>extended</strong> (<em>bool</em>) – If True, <cite>perViewErrors</cite> of the stereo calibration are returned. Default to False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>StereoRig</em> – A StereoRig object</p></li>
<li><p><em>perViewErrors</em> – Returned only if <cite>extended</cite> is True. For each pattern view, the
RMS error of camera and projector is returned.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="module-simplestereo.passive">
<span id="simplestereo-passive-module"></span><h2>simplestereo.passive module<a class="headerlink" href="#module-simplestereo.passive" title="Permalink to this headline">¶</a></h2>
<section id="passive">
<h3>passive<a class="headerlink" href="#passive" title="Permalink to this headline">¶</a></h3>
<p>Contains different passive stereo algorithms to build disparity maps.</p>
<p>Simpler algorithms, like StereoBM and StereoSGBM, are already implemented in OpenCV.</p>
<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.passive.StereoASW">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.passive.</span></span><span class="sig-name descname"><span class="pre">StereoASW</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">winSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">35</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxDisparity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minDisparity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gammaC</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gammaP</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">17.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consistent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/passive.html#StereoASW"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.passive.StereoASW" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Custom implementation of “Adaptive Support-Weight Approach
for Correspondence Search”, K. Yoon, I. Kweon, 2006.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>winSize</strong> (<em>int</em>) – Side of the square window. Must be an odd positive number. Default is 35.</p></li>
<li><p><strong>maxDisparity</strong> (<em>int</em>) – Maximum accepted disparity. Default is 16.</p></li>
<li><p><strong>minDisparity</strong> (<em>int</em>) – Minimum valid disparity, usually set to zero. Default is 0.</p></li>
<li><p><strong>gammaC</strong> (<em>float</em>) – Color parameter. If increased, it increases the color influence. Default is 5.</p></li>
<li><p><strong>gammaP</strong> (<em>float</em>) – Proximity parameter. If increased, it increases the proximity influence. Default is 17.5.</p></li>
<li><p><strong>consistent</strong> (<em>bool</em>) – If True consistent check is made, i.e. disparity is calculated first using left image as reference,
then using right one as reference. Any non-corresponding value is invalidated (occluded)
and assigned as the nearest minimum left-right non-occluded disparity. Original idea from occlusion
detection and filling as in “Local stereo matching using geodesic support weights”, Asmaa Hosni et al., 2009.
If enabled, running time is roughly doubled.
Default to False.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id14">
<p class="admonition-title">Todo</p>
<p>Alternative version can be written like this: compute disparity map on every other pixel
with the traditional algorithm, then fill the remaining pixels using left-right disparity
boundaries. This proved to be 40-50% faster with no significant decrease in quality.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It gets very slow for high resolution images or with high <em>winSize</em> or <em>maxDisparity</em> values.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This algorithm performs a 384x288 pixel image scan with maxDisparity=16 in less than 1 sec
using 4 CPUs (while other implementations need 60 sec, see DOI 10.1007/s11554-012-0313-2 with code “yk”).
To improve the final result, a smoothering filter could be applied.</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.passive.StereoASW.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/passive.html#StereoASW.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.passive.StereoASW.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute disparity map for BGR images.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img1</strong> (<em>cv2.Mat</em>) – A couple of OpenCV images (left and right, respectively) of same shape.</p></li>
<li><p><strong>img2</strong> (<em>cv2.Mat</em>) – A couple of OpenCV images (left and right, respectively) of same shape.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A disparity map of the same width and height of the images.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray (np.int16)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.passive.StereoGSW">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.passive.</span></span><span class="sig-name descname"><span class="pre">StereoGSW</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">winSize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">11</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxDisparity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">16</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minDisparity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gamma</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fMax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">120</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/passive.html#StereoGSW"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.passive.StereoGSW" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p><em>Incomplete</em> implementation of “Local stereo matching using geodesic support weights”,
Asmaa Hosni, Michael Bleyer, Margrit Gelautz and Christoph Rhemann (2009).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>winSize</strong> (<em>int</em><em>, </em><em>optional</em>) – Side of the square window. Must be an odd positive number.</p></li>
<li><p><strong>maxDisparity</strong> (<em>int</em><em>, </em><em>optional</em>) – Maximum accepted disparity. Default is 16.</p></li>
<li><p><strong>minDisparity</strong> (<em>int</em><em>, </em><em>optional</em>) – Minimum valid disparity, usually set to zero. Default is 0.</p></li>
<li><p><strong>gamma</strong> (<em>int</em><em>, </em><em>optional</em>) – Gamma parameter. If increased, it increases the geodesic weight influence. Default is 10.</p></li>
<li><p><strong>fMax</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>optional</em>) – Color difference is capped to this value. Default is 120.</p></li>
<li><p><strong>iterations</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of iteration for geodesic distances estimation. Default is 3.</p></li>
<li><p><strong>bins</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of bins for histograms (currently not used, needed for Mutual Information). Default is 20.</p></li>
<li><p><strong>..warning::</strong> – Not optimized. Do not use in production.</p></li>
<li><p><strong>..todo::</strong> – This is a work in progress.
The reference paper is not clear. Traditional Mutual Information computes a value for the whole
window (not position based). However formula (5) suggests a per-pixel iteration.
Currently implemented with sum of squared differences, weighted with geodesic.
Need to implement Mutual information as matching cost.
Need to implement right image consistency and subsequent occlusion filling.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.passive.StereoGSW.compute">
<span class="sig-name descname"><span class="pre">compute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/passive.html#StereoGSW.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.passive.StereoGSW.compute" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute disparity map for 3-color channel images.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="module-simplestereo.points">
<span id="simplestereo-points-module"></span><h2>simplestereo.points module<a class="headerlink" href="#module-simplestereo.points" title="Permalink to this headline">¶</a></h2>
<section id="points">
<h3>points<a class="headerlink" href="#points" title="Permalink to this headline">¶</a></h3>
<p>Functions to manage point clouds.</p>
<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.points.distortPoints">
<span class="sig-prename descclassname"><span class="pre">simplestereo.points.</span></span><span class="sig-name descname"><span class="pre">distortPoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distCoeff</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/points.html#distortPoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.points.distortPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Undistort relative coordinate points.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>points</strong> (<em>list</em>) – List of lists (or tuples) of x,y points in relative coordinates
(already multiplied by the inverse intrinsic matrix and undistorted).</p></li>
<li><p><strong>distCoeff</strong> (<em>list</em>) – List of 4, 5 or 8 elements (see OpenCV).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of lists of distorted x,y points in relative coordinates</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id15">
<p class="admonition-title">Todo</p>
<p>To be extended for (k1,k2,p1,p2[,k3[,k4,k5,k6[,s1,s2,s3,s4[,τx,τy]]]])
vector of &gt;8 elements.
To use numpy.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.points.exportPLY">
<span class="sig-prename descclassname"><span class="pre">simplestereo.points.</span></span><span class="sig-name descname"><span class="pre">exportPLY</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">points3D</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filepath</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">referenceImage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/points.html#exportPLY"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.points.exportPLY" title="Permalink to this definition">¶</a></dt>
<dd><p>Export raw point cloud to PLY file (ASCII).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>points3D</strong> (<em>numpy.ndarray</em>) – Array of 3D points. The last dimension must contain ordered x,y,z coordinates.</p></li>
<li><p><strong>filepath</strong> (<em>str</em>) – File path for the PLY file (absolute or relative).</p></li>
<li><p><strong>referenceImage</strong> (<em>numpy.ndarray</em><em>, </em><em>optional</em>) – Reference image to extract color from. It must contain the same
number of points of <cite>points3D</cite>. Last dimension must be either
1 (grayscale) or 3 (BGR).
Default to None.</p></li>
<li><p><strong>precision</strong> (<em>int</em>) – Decimal places to save coordinates with. Higher precision causes
bigger file size.
Default to 6.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.points.getAdimensional3DPoints">
<span class="sig-prename descclassname"><span class="pre">simplestereo.points.</span></span><span class="sig-name descname"><span class="pre">getAdimensional3DPoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">disparityMap</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/points.html#getAdimensional3DPoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.points.getAdimensional3DPoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Get adimensional 3D points from the disparity map.</p>
<p>This is the adimensional version of
<cite>RectifiedStereoRig.get3DPoints()</cite>.
Useful to reconstruct non-metric 3D models from any disparity map
when the stereo rig object is not known.
It may lead to incorrect proportions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>disparityMap</strong> (<em>numpy.ndarray</em>) – A dense disparity map having same height and width of images.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of points having shape <em>(height,width,3)</em>, where at each y,x coordinates
a <em>(x,y,z)</em> point is associated.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#simplestereo.RectifiedStereoRig.get3DPoints" title="simplestereo.RectifiedStereoRig.get3DPoints"><code class="xref py py-meth docutils literal notranslate"><span class="pre">simplestereo.RectifiedStereoRig.get3DPoints()</span></code></a></p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.points.importPLY">
<span class="sig-prename descclassname"><span class="pre">simplestereo.points.</span></span><span class="sig-name descname"><span class="pre">importPLY</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">properties</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/points.html#importPLY"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.points.importPLY" title="Permalink to this definition">¶</a></dt>
<dd><p>Import 3D coordinates from PLY file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – PLY file path.</p></li>
<li><p><strong>*properties</strong> (<em>argument list</em><em>, </em><em>optional</em>) – Property column positions to be extracted as <cite>float</cite>, in the
same order. Default to (0,1,2).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Array of data values with shape (number of values, number of
properties).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition-todo admonition" id="id16">
<p class="admonition-title">Todo</p>
<p>Automatically read PLY properties as <cite>dict</cite>.
Manage values other than <cite>float</cite>.</p>
</div>
</dd></dl>

</section>
</section>
<section id="module-simplestereo.rectification">
<span id="simplestereo-rectification-module"></span><h2>simplestereo.rectification module<a class="headerlink" href="#module-simplestereo.rectification" title="Permalink to this headline">¶</a></h2>
<section id="rectification">
<h3>rectification<a class="headerlink" href="#rectification" title="Permalink to this headline">¶</a></h3>
<p>Contains different rectification algorithms.</p>
<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.rectification.directRectify">
<span class="sig-prename descclassname"><span class="pre">simplestereo.rectification.</span></span><span class="sig-name descname"><span class="pre">directRectify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rig</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/rectification.html#directRectify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.rectification.directRectify" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the analytical rectification homographies.</p>
<p>Compute the 3x3 transformations to rectify a couple of stereo images
with minimim perspective distortion.
This implementation provides direct analytic solution, without using
minimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – An object of the StereoRig class.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Rectify1, Rectify2</strong> – 3x3 rectification homographies.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Lafiosca Pasquale and Ceccaroni Marta, “Rectifying homographies for
stereo vision: analytical solution for minimal distortion”, Lecture
Notes in Networks and Systems, 2022.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.rectification.fusielloRectify">
<span class="sig-prename descclassname"><span class="pre">simplestereo.rectification.</span></span><span class="sig-name descname"><span class="pre">fusielloRectify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rig</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/rectification.html#fusielloRectify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.rectification.fusielloRectify" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the two rectifying homographies and returns a RectifiedStereoRig.</p>
<p>This method uses the algorithm illustrated in <em>A compact algorithm for rectification of stereo pair</em>,
A. Fusiello et al., Machine Vision and Applications (2000).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – An object of the StereoRig class. Camera must be position 1 (origin), projector in position 2.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rectifiedStereoRigObj</strong> – An object of the RectifiedStereoRig class containing the rectifying homographies.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#simplestereo.RectifiedStereoRig" title="simplestereo.RectifiedStereoRig">RectifiedStereoRig</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.rectification.getBestXShearingTransformation">
<span class="sig-prename descclassname"><span class="pre">simplestereo.rectification.</span></span><span class="sig-name descname"><span class="pre">getBestXShearingTransformation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rectHomography</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/rectification.html#getBestXShearingTransformation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.rectification.getBestXShearingTransformation" title="Permalink to this definition">¶</a></dt>
<dd><p>Get best shear transformation (affine) over x axis that minimizes distortion.</p>
<p>Applying a shearing transformation over the x axis does not affect rectification and allows to reduce
image distortion.
Original algorithm in par. 7 of <em>Computying rectifying homographies for stereo vision</em>, CVPR 1999, Loop C. and Zhang Z.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rectHomography</strong> (<em>numpy.ndarray</em>) – A 3x3 rectification homography.</p></li>
<li><p><strong>dims</strong> (<em>tuple</em>) – Resolution of destination image as (width, height) tuple.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>S</strong> – A 3x3 shearing (x axis) transform.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All the tranformations applied to the images must be taken into account when computing disparity
for 3D reconstruction.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.rectification.getFittingMatrices">
<span class="sig-prename descclassname"><span class="pre">simplestereo.rectification.</span></span><span class="sig-name descname"><span class="pre">getFittingMatrices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intrinsicMatrix1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">intrinsicMatrix2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">H1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">H2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dims2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distCoeffs1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distCoeffs2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destDims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zoom</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/rectification.html#getFittingMatrices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.rectification.getFittingMatrices" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute affine tranformation to fit the rectified images into desidered dimensions.</p>
<p>After rectification usually the image is no more into the original image bounds.
One can apply any transformation that do not affect disparity to fit the image into boundaries.
This function corrects flipped images too.
The algorithm may fail if one epipole is too close to the image.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intrinsicMatrix1</strong> (<em>numpy.ndarray</em>) – 3x3 original camera matrices of intrinsic parameters.</p></li>
<li><p><strong>intrinsicMatrix2</strong> (<em>numpy.ndarray</em>) – 3x3 original camera matrices of intrinsic parameters.</p></li>
<li><p><strong>H1</strong> (<em>numpy.ndarray</em>) – 3x3 rectifying homographies.</p></li>
<li><p><strong>H2</strong> (<em>numpy.ndarray</em>) – 3x3 rectifying homographies.</p></li>
<li><p><strong>dims1</strong> (<em>tuple</em>) – Resolution of images as (width, height) tuple.</p></li>
<li><p><strong>dims2</strong> (<em>tuple</em>) – Resolution of images as (width, height) tuple.</p></li>
<li><p><strong>distCoeffs1</strong> (<em>numpy.ndarray</em><em>, </em><em>optional</em>) – Distortion coefficients in the order followed by OpenCV. If None is passed, zero distortion is assumed.</p></li>
<li><p><strong>distCoeffs2</strong> (<em>numpy.ndarray</em><em>, </em><em>optional</em>) – Distortion coefficients in the order followed by OpenCV. If None is passed, zero distortion is assumed.</p></li>
<li><p><strong>destDims</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Resolution of destination images as (width, height) tuple (default to the first image resolution).</p></li>
<li><p><strong>zoom</strong> (<em>float</em><em>, </em><em>optional</em>) – Zoom parameter to be applied to both images (default to 1). Used to remove unwanted portions of the images.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>K1, K2</strong> – 3x3 affine transformations to be used for the first and the second camera, respectively.
They will differ by a x-shift value only.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.rectification.loopRectify">
<span class="sig-prename descclassname"><span class="pre">simplestereo.rectification.</span></span><span class="sig-name descname"><span class="pre">loopRectify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rig</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/rectification.html#loopRectify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.rectification.loopRectify" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the two rectifying homographies and returns a RectifiedStereoRig.</p>
<p>This method is an implementation of the algorithm illustrated in
<em>Computying rectifying homographies for stereo vision</em>, CVPR 1999, Loop C. and Zhang Z.
This function performs a minimization using <code class="docutils literal notranslate"><span class="pre">scipy.optimize</span></code> module.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – An object of the StereoRig class.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rectifiedStereoRigObj</strong> – An object of the RectifiedStereoRig class containing the rectifying homographies.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#simplestereo.RectifiedStereoRig" title="simplestereo.RectifiedStereoRig">RectifiedStereoRig</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Also an object of <a class="reference internal" href="#simplestereo.RectifiedStereoRig" title="simplestereo.RectifiedStereoRig"><code class="xref py py-meth docutils literal notranslate"><span class="pre">simplestereo.RectifiedStereoRig()</span></code></a> may be
passed as input to recalculate its rectification
transformations (e.g. changing algorithm).</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.rectification.stereoRectify">
<span class="sig-prename descclassname"><span class="pre">simplestereo.rectification.</span></span><span class="sig-name descname"><span class="pre">stereoRectify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rig</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/rectification.html#stereoRectify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.rectification.stereoRectify" title="Permalink to this definition">¶</a></dt>
<dd><p>Rectify the StereoRig object using the standard OpenCV algorithm.</p>
<p>This function computes the new common camera orientation by averaging.
It does not produce the rectifying homographies with minimal perspective distortion.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rig</strong> (<a class="reference internal" href="#simplestereo.StereoRig" title="simplestereo.StereoRig"><em>StereoRig</em></a>) – An object of the StereoRig class</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rectifiedStereoRigObj</strong> – An object of the RectifiedStereoRig class containing the rectifying homographies.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#simplestereo.RectifiedStereoRig" title="simplestereo.RectifiedStereoRig">RectifiedStereoRig</a></p>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="module-simplestereo.unwrapping">
<span id="simplestereo-unwrapping-module"></span><h2>simplestereo.unwrapping module<a class="headerlink" href="#module-simplestereo.unwrapping" title="Permalink to this headline">¶</a></h2>
<section id="phaseunwrapping">
<h3>phaseUnwrapping<a class="headerlink" href="#phaseunwrapping" title="Permalink to this headline">¶</a></h3>
<p>Contains different phase unwrapping strategies.</p>
<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.unwrapping.infiniteImpulseResponse">
<span class="sig-prename descclassname"><span class="pre">simplestereo.unwrapping.</span></span><span class="sig-name descname"><span class="pre">infiniteImpulseResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phase</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tau</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/unwrapping.html#infiniteImpulseResponse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.unwrapping.infiniteImpulseResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Unwrap a 2D phase map.</p>
<p>Method from “Noise robust linear dynamic system for
phase unwrapping and smoothing”, Estrada et al, 2011,
DOI: 10.1364/OE.19.005126</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phase</strong> (<em>ndarray</em>) – A 2D array containing the wrapped phase values.</p></li>
<li><p><strong>tau</strong> (<em>float</em><em>, </em><em>optional</em>) – Noise regularization parameter. Accept values from 0 to 1.
Lower values used for higher error.
Default to 1.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Unwrapped phase with same dimensions and type of <cite>phase</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>ndarray</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>&lt;<a class="reference external" href="https://doi.org/10.1016/j.optlaseng.2012.01.008">https://doi.org/10.1016/j.optlaseng.2012.01.008</a>&gt;</p>
</div>
<div class="admonition-todo admonition" id="id17">
<p class="admonition-title">Todo</p>
<p>If called twice, it may not work. To be fixed!</p>
</div>
</dd></dl>

</section>
</section>
<section id="module-simplestereo.utils">
<span id="simplestereo-utils-module"></span><h2>simplestereo.utils module<a class="headerlink" href="#module-simplestereo.utils" title="Permalink to this headline">¶</a></h2>
<section id="utils">
<h3>utils<a class="headerlink" href="#utils" title="Permalink to this headline">¶</a></h3>
<p>This module provides general utilities.</p>
<dl class="py class">
<dt class="sig sig-object py" id="simplestereo.utils.Capture">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">simplestereo.utils.</span></span><span class="sig-name descname"><span class="pre">Capture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flipY</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/utils.html#Capture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.utils.Capture" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Capture a video stream continuously.</p>
<p>Allows to capture a video stream in a separate thread and grab the current frame when needed,
minimizing lags for streaming and webcams.
It supports webcams, URL streaming and video files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>device</strong> (<em>int</em><em> or </em><em>str</em>) – Id of the opened video capturing device (i.e. a camera index). If there is a single camera connected, usually it will be 0 (default 0).
Also the string containing full URL of the video stream (e.g. <em>protocol://username:password&#64;script?params</em>) or a path to a video file.</p></li>
<li><p><strong>flipY</strong> (<em>bool</em>) – If True, output image is flipped on the Y-axis. Default to False.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If device cannot be opened.</p></li>
<li><p><strong>.. note::</strong> – When using video streaming URL the initialization may require some time. Check that the image frame is not None
    and / or insert a time.sleep() after object constructor.</p></li>
</ul>
</dd>
</dl>
<div class="admonition-todo admonition" id="id18">
<p class="admonition-title">Todo</p>
<p>Add support for other options (e.g. change focal length where supported).</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.utils.Capture.get">
<span class="sig-name descname"><span class="pre">get</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/utils.html#Capture.get"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.utils.Capture.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the current frame.</p>
<p>Returns None if there is no frame (e.g. end of video file).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.utils.Capture.setFrameRate">
<span class="sig-name descname"><span class="pre">setFrameRate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fps</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/utils.html#Capture.setFrameRate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.utils.Capture.setFrameRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Set framerate of the camera.</p>
<p>Do not call this for video files or when the thread is running.
It works only for supported cameras.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>fps</strong> (<em>int</em>) – Frames per second.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the framerate was set successfully, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.utils.Capture.setResolution">
<span class="sig-name descname"><span class="pre">setResolution</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/utils.html#Capture.setResolution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.utils.Capture.setResolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Set resolution of the camera.</p>
<p>Do not call this for video files or when the thread is running.
It works only for supported cameras.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>width</strong> (<em>int</em>) – Width and height to be set in pixels.</p></li>
<li><p><strong>heigth</strong> (<em>int</em>) – Width and height to be set in pixels.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the resolution was set successfully, False otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.utils.Capture.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/utils.html#Capture.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.utils.Capture.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start the capture in a separate thread.</p>
<p>No need to call this for video files.
The thread continuously calls <code class="docutils literal notranslate"><span class="pre">grab()</span></code> to stay updated to the last frame,
while <code class="docutils literal notranslate"><span class="pre">retrieve()</span></code> is called only when the frame is actually needed.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="simplestereo.utils.Capture.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/utils.html#Capture.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.utils.Capture.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop the capture.</p>
<p>When finished, remember to call this method to <strong>stop the capturing thread</strong>.
No need to call this for video files.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.utils.drawCorrespondingEpipolarLines">
<span class="sig-prename descclassname"><span class="pre">simplestereo.utils.</span></span><span class="sig-name descname"><span class="pre">drawCorrespondingEpipolarLines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">img1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">img2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">F</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">x2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0,</span> <span class="pre">255)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thickness</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/utils.html#drawCorrespondingEpipolarLines"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.utils.drawCorrespondingEpipolarLines" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw epipolar lines passing by given coordinates in img1 or img1.</p>
<p>The epipolar lines can be drawn on the images, knowing the
fundamental matrix.
Please note that this is an in-place method, i.e. passed images will
be modified directly.
Distortion is <em>not</em> taken into account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>img1</strong> (<em>cv2.Mat</em>) – A couple of OpenCV images taken with a stereo rig (ordered).</p></li>
<li><p><strong>img2</strong> (<em>cv2.Mat</em>) – A couple of OpenCV images taken with a stereo rig (ordered).</p></li>
<li><p><strong>F</strong> (<em>numpy.ndarray</em>) – 3x3 fundamental matrix.</p></li>
<li><p><strong>x1</strong> (<em>list</em>) – List of (x,y) coordinate points on the image 1 (or image 2, respectively).</p></li>
<li><p><strong>x2</strong> (<em>list</em>) – List of (x,y) coordinate points on the image 1 (or image 2, respectively).</p></li>
<li><p><strong>color</strong> (<em>tuple</em><em>, </em><em>optional</em>) – Color as BGR tuple (default to (0,0,255) (red)).</p></li>
<li><p><strong>thickness</strong> (<em>int</em><em>, </em><em>optional</em>) – Thickness of the lines in pixels (default to 1).</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function needs <em>undistorted</em> images.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.utils.getCrossProductMatrix">
<span class="sig-prename descclassname"><span class="pre">simplestereo.utils.</span></span><span class="sig-name descname"><span class="pre">getCrossProductMatrix</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">v</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/utils.html#getCrossProductMatrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.utils.getCrossProductMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the 3x3 antisymmetric matrix representing the cross product with v.</p>
<p>In literature this is often indicated as [v]<sub>x</sub>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>v</strong> (<em>numpy.ndarray</em><em> or </em><em>list</em>) – A 3-dimensional vector.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A 3x3 matrix representing the cross product with the input vector.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="simplestereo.utils.moveExtrinsicOriginToFirstCamera">
<span class="sig-prename descclassname"><span class="pre">simplestereo.utils.</span></span><span class="sig-name descname"><span class="pre">moveExtrinsicOriginToFirstCamera</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">R1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">R2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/simplestereo/utils.html#moveExtrinsicOriginToFirstCamera"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#simplestereo.utils.moveExtrinsicOriginToFirstCamera" title="Permalink to this definition">¶</a></dt>
<dd><p>Center extrinsic parameters world coordinate system into camera 1.</p>
<p>Compute R (rotation from camera 1 to camera 2) and T (translation from camera 1 to camera 2) as used in OpenCV
from extrinsic of two cameras centered anywhere else.
This is particularly useful when the world coordinate system is not centered into the first camera.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>R1</strong> (<em>np.array</em>) – 3x3 rotation matrices that go from world origin to each camera center.</p></li>
<li><p><strong>R2</strong> (<em>np.array</em>) – 3x3 rotation matrices that go from world origin to each camera center.</p></li>
<li><p><strong>t1</strong> (<em>np.array</em>) – 3x1 translation vectors that go from world origin to each camera center.</p></li>
<li><p><strong>t2</strong> (<em>np.array</em>) – 3x1 translation vectors that go from world origin to each camera center.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>numpy.ndarray</em> – Rotation matrix between the 1st and the 2nd camera coordinate systems as numpy.ndarray.</p></li>
<li><p><em>numpy.ndarray</em> – Translation vector between the coordinate systems of the cameras as numpy.ndarray.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">simplestereo package</a><ul>
<li><a class="reference internal" href="#module-simplestereo">Module contents</a><ul>
<li><a class="reference internal" href="#simplestereo">simplestereo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-simplestereo.active">simplestereo.active module</a><ul>
<li><a class="reference internal" href="#active">active</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-simplestereo.calibration">simplestereo.calibration module</a><ul>
<li><a class="reference internal" href="#calibration">calibration</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-simplestereo.passive">simplestereo.passive module</a><ul>
<li><a class="reference internal" href="#passive">passive</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-simplestereo.points">simplestereo.points module</a><ul>
<li><a class="reference internal" href="#points">points</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-simplestereo.rectification">simplestereo.rectification module</a><ul>
<li><a class="reference internal" href="#rectification">rectification</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-simplestereo.unwrapping">simplestereo.unwrapping module</a><ul>
<li><a class="reference internal" href="#phaseunwrapping">phaseUnwrapping</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-simplestereo.utils">simplestereo.utils module</a><ul>
<li><a class="reference internal" href="#utils">utils</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="index.html"
                          title="previous chapter">Welcome to SimpleStereo’s documentation!</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/simplestereo.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to SimpleStereo’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">SimpleStereo 1 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">simplestereo package</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, decadenza.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>